<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Банк заданий по русскому языку ОГЭ</title>
  <style>
    :root{
      --bg: #f7fbff;
      --card: #ffffff;
      --text: #1b1b1d;
      --primary: #2a7ae2;
      --muted: #6b7280;
      --accent: #e3f2ff;
      --border: #e5e7eb;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Arial, sans-serif;min-height:100vh}
    header{background:#fff;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10}
    .container{max-width:1024px;margin:0 auto;padding:0 16px}
    nav{display:flex;gap:16px;align-items:center;padding:14px 0}
    .brand{font-weight:700;font-size:20px}
    .tabs{display:flex;gap:6px}
    .tab{padding:10px 14px;border-radius:8px;border:1px solid var(--border);background:#f8fbff;cursor:pointer}
    .tab.active{background:#eaf3ff;border-color:#b9d7ff;color:#0b5bd3}
    main{padding:20px 0}
    section.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;box-shadow:0 2px 6px rgba(0,0,0,.04);margin:16px 0}
    h2{margin:0 0 10px;font-size:1.25rem}
    .muted{color:var(--muted);font-size:0.95rem}
    .btn{padding:10px 14px;border-radius:8px;border:1px solid var(--border);background:#fff;cursor:pointer}
    .btn.primary{background:var(--primary);color:#fff;border-color:var(--primary)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px}
    .panel{padding:14px;border-radius:10px;border:1px solid var(--border);background:#fff}
    .list{display:flex;flex-direction:column;gap:8px}
    label{font-weight:600}
    select,input{padding:8px;border-radius:6px;border:1px solid var(--border);width:100%}
    .hidden{display:none}
    footer{text-align:center;padding:20px 0;color:var(--muted);font-size:0.9rem}
    /* простая пагинация-симуляция страниц заданий */
    .page{display:none}
    .page.active{display:block}
  </style>
</head>
<body>
  <header>
    <div class="container" role="navigation" aria-label="Глобальная навигация">
      <div class="brand">ОГЭ: Русский язык — банк заданий</div>
      <nav class="tabs" aria-label="Разделы сайта">
        <button class="tab active" data-target="home">Главная</button>
        <button class="tab" data-target="bank">Банк заданий</button>
        <button class="tab" data-target="feedback">Отзыв</button>
      </nav>
    </div>
  </header>

  <main class="container" id="content">
    <!-- Главная -->
    <section id="home" class="page active" aria-label="Главная страница">
      <section class="card">
        <h2>Добро пожаловать в демо-банк заданий по русскому языку ОГЭ</h2>
        <p class="muted" style="margin-top:6px">
          Это демонстрационный интерфейс. Здесь вы можете потренироваться на отдельных заданиях
          или пройти полный экзамен. В реальном варианте добавьте реальные тексты заданий, аудио и пояснения.
        </p>
        <div style="margin-top:12px">
          <button class="btn primary" data-target="bank">Перейти к банку заданий</button>
        </div>
      </section>
    </section>

    <!-- Банков заданий -->
    <section id="bank" class="page" aria-label="Банк заданий">
      <section class="card" id="branch-choice">
        <h2>Выберите режим</h2>
        <p class="muted">1) Тренировка по каждому заданию отдельно (13 заданий). 2) Решить полный экзамен (60 вариантов).</p>
        <div class="grid" style="grid-template-columns:1fr 1fr;">
          <div class="panel" style="display:flex;flex-direction:column;gap:8px">
            <strong>Тренировка по заданиям</strong>
            <div class="muted" style="font-size:.92rem">Выбирайте номер задания (1–13) и затем один из 60 вариантов.</div>
            <button class="btn" id="start-teach" data-mode="teach">Перейти к тренировке</button>
          </div>
          <div class="panel" style="display:flex;flex-direction:column;gap:8px">
            <strong>Экзамен</strong>
            <div class="muted" style="font-size:.92rem">60 вариантов полного экзамена, состоящего из 13 заданий.</div>
            <button class="btn" id="start-exam" data-mode="exam">Перейти к экзамену</button>
          </div>
        </div>
      </section>

      <!-- Тренировка по заданию: выбор номера задания -->
      <section class="card" id="teach-stage" aria-label="Тренировка по заданию" class="hidden" style="display:none">
        <h2>Тренировка по заданию</h2>
        <div class="grid" style="grid-template-columns:1fr 1fr;">
          <div class="panel" style="display:flex;flex-direction:column;gap:8px">
            <label for="task-number">Выберите номер задания (1–13)</label>
            <select id="task-number" aria-label="Номер задания">
              <!-- заполнение через JS -->
            </select>
          </div>
          <div class="panel" id="audio-flag" style="display:flex;flex-direction:column;gap:8px">
            <label>Информация</label>
            <div class="muted" id="audio-note">Задание 1 содержит аудиозапись. Убедитесь, что звук включён.</div>
          </div>
        </div>

        <hr/>
        <div id="question-area" class="muted" style="font-size:1rem">Здесь будет формироваться выбранный вариант вопроса. Выберите ответ, чтобы тренироваться.</div>

        <!-- варианты (60) -->
        <div id="options" class="grid" style="grid-template-columns:repeat(auto-fill,minmax(180px,1fr));margin-top:10px">
          <!-- кнопки вариантов добавляются JS -->
        </div>

        <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
          <button class="btn" id="prev-variant">◀ Предыдущий</button>
          <span class="muted" id="variant-index" style="min-width:120px;display:inline-block;text-align:center"></span>
          <button class="btn" id="next-variant">Следующий ▶</button>
          <span class="muted" style="margin-left:auto">Пояснение будет доступно после завершения задания.</span>
        </div>

        <div style="margin-top:12px">
          <button class="btn primary" id="save-answer-teach">Сохранить ответ</button>
        </div>

        <div style="margin-top:16px" class="muted" id="teach-progress">Прогресс: 0/0</div>

        <div style="margin-top:18px" aria-live="polite" id="teach-feedback"></div>
      </section>

      <!-- Экзамен: 60 вариантов, 13 заданий -->
      <section class="card" id="exam-stage" aria-label="Экзамен" style="display:none">
        <h2>Экзамен из 60 вариантов по 13 заданиям</h2>
        <div class="muted" style="margin-bottom:8px">Каждое задание имеет 4 варианта ответа. Задания 2–12 проверяются автоматически. Задания 1 и 13 можно сравнить с верными решениями после завершения.</div>

        <div class="panel" style="margin-bottom:8px;display:flex;gap:8px;align-items:center">
          <button class="btn" id="shuffle-exam">Сгенерировать новый экзамен</button>
          <span class="muted" id="exam-status" style="margin-left:auto">Статус: готово</span>
        </div>

        <div id="exam-questions" class="grid" style="grid-template-columns:repeat(auto-fill,minmax(420px,1fr));gap:14px">
          <!-- вопросы 1..13 будут вставлены JS -->
        </div>

        <div style="margin-top:14px">
          <button class="btn primary" id="finish-exam">Завершить экзамен</button>
        </div>

        <div style="margin-top:14px" id="exam-feedback" class="muted"></div>
      </section>

      <!-- Навигация между внутренними частями -->
      <section class="card" aria-label="Навигация внутри банка заданий" style="display:none" id="internal-nav">
        <h2>Навигация</h2>
        <div class="muted" style="margin-bottom:6px">Переключение между разделами без перезагрузки страницы.</div>
        <button class="btn" id="to-teach">Тренировка</button>
        <button class="btn" id="to-exam" style="margin-left:8px">Экзамен</button>
      </section>
    </section>

    <!-- Отзыв -->
    <section id="feedback" class="page" aria-label="Отзывы">
      <section class="card">
        <h2>Ваш отзыв</h2>
        <p class="muted" style="margin-bottom:8px">Расскажите, что можно улучшить в интерфейсе или заданиях.</p>
        <div class="grid" style="grid-template-columns:1fr 1fr;">
          <div class="panel" style="display:flex;flex-direction:column;gap:8px">
            <label for="name">Имя</label>
            <input id="name" type="text" placeholder="Ваше имя" />
          </div>
          <div class="panel" style="display:flex;flex-direction:column;gap:8px">
            <label for="email">Email</label>
            <input id="email" type="email" placeholder="email@example.com" />
          </div>
        </div>
        <div class="panel" style="margin-top:8px;display:flex;flex-direction:column;gap:8px">
          <label for="message">Сообщение</label>
          <textarea id="message" rows="4" placeholder="Ваш отзыв..." style="resize:vertical"></textarea>
        </div>
        <button class="btn primary" id="submit-feedback" style="margin-top:8px">Отправить</button>
        <div id="feedback-result" class="muted" style="margin-top:8px"></div>
      </section>
    </section>
  </main>

  <footer>
    © 2025 Демонстрационная версия. Все задания вымышлены для примера интерфейса.
  </footer>

  <script>
    // Заготовка данных: 13 заданий по теме. В реальном варианте замените на реальные тексты и аудио.
    // Структура задания: { id, text, options: [..], answers: [idx], explanation, audioSrc, isAudioRequired }
    const TOTAL_TASKS = 13;
    const VARIANTS_PER_TASK = 60;

    // Пример базовых заданий. Данные для тренировки (1..13). Аудио для задания 1 можно заменить реальным файлом.
    const tasksBank = [];
    for (let i = 1; i <= TOTAL_TASKS; i++) {
      // генерируем заглушку задания
      const task = {
        id: i,
        text: `Задание ${i}: пример формулировки на тему орфографии/пунктуации (демо). Выберите правильный ответ из списка ниже.`,
        options: [
          "Вариант A", "Вариант B", "Вариант C", "Вариант D"
        ],
        answers: [ (i % 4), ], // одна верная позиция среди 4
        explanation: `Пояснение к заданию ${i}: здесь будет объяснение правильного решения и примеры.`,
        audioSrc: i === 1 ? "audio/excerpt1.mp3" : "", // только для задания 1 демонстрационный аудиоклип
        isAudioRequired: i === 1
      };
      // расширяем до 60 вариантов для каждого задания
      task.variants = [];
      for (let v = 0; v < VARIANTS_PER_TASK; v++) {
        task.variants.push({
          id: v+1,
          prompt: `Задание ${i}, вариант ${v+1}: формулировка вопроса (демо).`,
          options: task.options,
          answers: task.answers,
        });
      }
      tasksBank.push(task);
    }

    // состояние UI
    let currentTaskIndex = 1; // 1..13
    let currentVariantIndex = 0; // 0..59
    let userAnswersTeach = {}; // {taskId: selectedOptionIndex}
    let examSelectedSet = []; // выбранный набор задач для экзамена: по 13 заданий, 60 вариантов на каждое
    let examAnswers = {}; // хранение выбранных ответов по экзамену
    let examQuestions = []; // формируем 13 задач для экзамена, каждая с 60 вариантами

    // элементы
    const tabs = document.querySelectorAll('.tab');
    const pages = document.querySelectorAll('.page');
    const homePage = document.getElementById('home');
    const bankPage = document.getElementById('bank');
    const feedbackPage = document.getElementById('feedback');

    // раздел "банка" элементы
    const startTeachBtn = document.getElementById('start-teach');
    const startExamBtn = document.getElementById('start-exam');
    const teachSection = document.getElementById('teach-stage');
    const examSection = document.getElementById('exam-stage');
    const internalNav = document.getElementById('internal-nav');
    const toTeachBtn = document.getElementById('to-teach');
    const toExamBtn = document.getElementById('to-exam');
    const taskNumberSel = document.getElementById('task-number');
    const optionsArea = document.getElementById('options');
    const variantIndexLabel = document.getElementById('variant-index');
    const prevVariantBtn = document.getElementById('prev-variant');
    const nextVariantBtn = document.getElementById('next-variant');
    const saveTeachBtn = document.getElementById('save-answer-teach');
    const teachProgress = document.getElementById('teach-progress');
    const teachFeedback = document.getElementById('teach-feedback');
    const audioNote = document.getElementById('audio-note');
    const examQuestionsArea = document.getElementById('exam-questions');
    const shuffleExamBtn = document.getElementById('shuffle-exam');
    const examStatus = document.getElementById('exam-status');
    const finishExamBtn = document.getElementById('finish-exam');
    const examFeedback = document.getElementById('exam-feedback');
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const messageInput = document.getElementById('message');
    const submitFeedbackBtn = document.getElementById('submit-feedback');
    const feedbackResult = document.getElementById('feedback-result');

    // базовая навигация по вкладкам
    function showPage(id) {
      pages.forEach(p => p.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      // скролл к верху
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    tabs.forEach(t => t.addEventListener('click', () => {
      tabs.forEach(x => x.classList.remove('active'));
      t.classList.add('active');
      const target = t.dataset.target;
      showPage(target);
      // сохранить состояние видов
    }));

    // начальная настройка
    function initTaskNumberOptions() {
      taskNumberSel.innerHTML = '';
      for (let i = 1; i <= TOTAL_TASKS; i++) {
        const opt = document.createElement('option');
        opt.value = i;
        opt.textContent = `Задание ${i}`;
        taskNumberSel.appendChild(opt);
      }
      // начать с текущего
      taskNumberSel.value = 1;
    }

    // создание вариантов для текущего задания (60 вариантов)
    function renderVariantsForTask(taskId, variantStart = 0) {
      optionsArea.innerHTML = '';
      const task = tasksBank.find(t => t.id === taskId);
      const variants = task.variants;
      // 60 вариантов
      for (let i = 0; i < variants.length; i++) {
        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.style.minWidth = 'auto';
        btn.style.padding = '6px 10px';
        btn.textContent = `Вариант ${i+1}`;
        btn.dataset.variantIndex = i;
        btn.addEventListener('click', () => {
          currentVariantIndex = i;
          highlightSelectedVariant(i);
        });
        optionsArea.appendChild(btn);
      }
      // показать выбранный индекс
      currentVariantIndex = variantStart;
      highlightSelectedVariant(currentVariantIndex);
      updateVariantIndexLabel();
    }

    function highlightSelectedVariant(idx) {
      Array.from(optionsArea.children).forEach((el, i) => {
        el.style.background = (i === idx) ? '#eaf3ff' : '#fff';
      });
      // показать вопрос/вариант
      const taskId = parseInt(taskNumberSel.value, 10);
      const variant = tasksBank.find(t => t.id === taskId).variants[idx];
      const lines = [
        `Задание ${taskId}, вариант ${idx+1}:`,
        variant.prompt
      ];
      document.getElementById('question-area').textContent = lines.join(' ');
      // если есть аудио для задания 1 и это задание 1, можно проиграть
      if (taskId === 1 && tasksBank[0].isAudioRequired) {
        // просто уведомление; реальное аудио проигрывание можно добавить
      }
    }

    function updateVariantIndexLabel() {
      variantIndexLabel.textContent = `Вариант ${currentVariantIndex+1} из 60`;
    }

    // прогресс тренировки
    function updateTeachProgress() {
      const done = Object.keys(userAnswersTeach).length;
      teachProgress.textContent = `Прогресс: ${done}/${TOTAL_TASKS}`;
    }

    // сохранение ответа на текущее задание тренировки
    function saveTeachAnswer() {
      const taskId = parseInt(taskNumberSel.value, 10);
      // текущий вариант как ответ
      userAnswersTeach[taskId] = currentVariantIndex;
      updateTeachProgress();
      teachFeedback.textContent = `Ответ сохранён для задания ${taskId}, вариант ${currentVariantIndex+1}.`;
      // показать пояснение после завершения тренировки
    }

    // Инициализация экзамена
    function generateExam() {
      // простая генерация: выбрать 13 заданий и для каждого 60 вариантов
      examSelectedSet = [];
      for (let i = 1; i <= TOTAL_TASKS; i++) {
        examSelectedSet.push(i);
      }
      // для демо: оставить как есть
      examQuestions = examSelectedSet.map(taskId => {
        const t = tasksBank.find(x => x.id === taskId);
        return {
          taskId,
          variants: t.variants
        };
      });
      examAnswers = {}; // очистить
    }

    function renderExamQuestions() {
      examQuestionsArea.innerHTML = '';
      examQuestions.forEach((q, idx) => {
        const card = document.createElement('div');
        card.className = 'panel';
        card.style.display = 'flex';
        card.style.flexDirection = 'column';
        card.style.padding = '12px';
        card.style.border = '1px solid var(--border)';
        card.style.background = '#fff';
        const title = document.createElement('div');
        title.innerHTML = `<strong>Задание ${q.taskId}</strong>`;
        const prompt = document.createElement('div');
        prompt.className = 'muted';
        prompt.style.marginTop = '6px';
        prompt.textContent = `Задание ${q.taskId}: демонстрационный текст вопроса.`;
        const opts = document.createElement('div');
        opts.className = 'grid';
        opts.style.gridTemplateColumns = 'repeat(2, 1fr)';
        // 4 варианта
        for (let i = 0; i < q.variants[0].options.length; i++) {
          const optBtn = document.createElement('button');
          optBtn.className = 'btn';
          optBtn.style.margin = '6px';
          optBtn.textContent = q.variants[0].options[i];
          optBtn.dataset.question = idx;
          optBtn.dataset.option = i;
          optBtn.addEventListener('click', () => {
            examAnswers[idx] = i;
            optBtn.style.background = '#e6f0ff';
          });
          opts.appendChild(optBtn);
        }
        card.appendChild(title);
        card.appendChild(prompt);
        card.appendChild(opts);
        examQuestionsArea.appendChild(card);
      });
    }

    // завершение экзамена: подсчёт баллов (для простоты считаем задания 2–12 автоматически, 1 и 13 можно сравнить)
    function finishExam() {
      // простая проверка: максимальная оценка равна количеству заданий с ответами
      const total = examQuestions.length;
      let score = 0;
      for (let i = 0; i < total; i++) {
        if (examAnswers[i] !== undefined) score++;
      }
      examFeedback.textContent = `Вы набрали ${score} из ${total} баллов. Задания 1 и 13 можно сверить с правильными решениями отдельно в разделе пояснений.`;
    }

    // отзыв
    submitFeedbackBtn.addEventListener('click', () => {
      const name = nameInput.value.trim();
      const email = emailInput.value.trim();
      const message = messageInput.value.trim();
      if(!message) {
        feedbackResult.textContent = 'Пожалуйста, введите сообщение.';
        return;
      }
      feedbackResult.textContent = 'Спасибо за отзыв! Он будет отправлен администраторам.';
      // Очистка формы
      nameInput.value = '';
      emailInput.value = '';
      messageInput.value = '';
    });

    // кнопки управления
    startTeachBtn.addEventListener('click', () => {
      teachSection.style.display = 'block';
      examSection.style.display = 'none';
      internalNav.style.display = 'block';
      // инициализация выбора задания
      initTaskNumberOptions();
      renderVariantsForTask(1, 0);
      currentVariantIndex = 0;
      updateVariantIndexLabel();
      // показать пояснение
      document.getElementById('teach-progress').textContent = `Прогресс: 0/${TOTAL_TASKS}`;
      // показать нужный раздел
      // переключиться на вкладку внутри банки
      showPage('bank');
      // показать секцию тренировки
      document.getElementById('teach-stage').style.display = 'block';
      document.getElementById('exam-stage').style.display = 'none';
    });

    startExamBtn.addEventListener('click', () => {
      // подготовка экзамена
      generateExam();
      renderExamQuestions();
      examSection.style.display = 'block';
      teachSection.style.display = 'none';
      internalNav.style.display = 'block';
      showPage('bank');
      // показать секцию экзамена
      document.getElementById('exam-stage').style.display = 'block';
      document.getElementById('teach-stage').style.display = 'none';
    });

    // навигация внутри банка
    toTeachBtn.addEventListener('click', () => {
      document.getElementById('start-teach').click();
    });
    toExamBtn.addEventListener('click', () => {
      document.getElementById('start-exam').click();
    });

    // обновление вариантов при выборе номера задания
    taskNumberSel.addEventListener('change', () => {
      const tId = parseInt(taskNumberSel.value, 10);
      currentVariantIndex = 0;
      renderVariantsForTask(tId, 0);
      // если аудио для задания 1
      audioNote.textContent = (tId === 1) ?
        'Задание 1 содержит аудиозапись. Убедитесь, что звук включён.' :
        'Задание не содержит аудиозаписи.';
      updateTeachProgress();
    });

    prevVariantBtn.addEventListener('click', () => {
      if (currentVariantIndex > 0) {
        currentVariantIndex--;
        highlightSelectedVariant(currentVariantIndex);
        updateVariantIndexLabel();
      }
    });

    nextVariantBtn.addEventListener('click', () => {
      if (currentVariantIndex < VARIANTS_PER_TASK - 1) {
        currentVariantIndex++;
        highlightSelectedVariant(currentVariantIndex);
        updateVariantIndexLabel();
      }
    });

    saveTeachBtn.addEventListener('click', () => {
      saveTeachAnswer();
    });

    // заявлено: после прохождения к каждому заданию даётся пояснение
    // здесь показываем пояснение после сохранения
    teachFeedback.addEventListener('DOMSubtreeModified', () => {
      // можно реализовать логику показа пояснения после завершения, пропущена для упрощения
    });

    // экзамен: генерация нового экзамена
    shuffleExamBtn.addEventListener('click', () => {
      generateExam();
      renderExamQuestions();
      examStatus.textContent = 'Статус: обновлён';
      examFeedback.textContent = '';
    });

    // завершение экзамена
    finishExamBtn.addEventListener('click', () => {
      finishExam();
    });

    // простая навигация по вкладкам
    // начальная загрузка
    initTaskNumberOptions();
  </script>
</body>
</html>
